[{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Introduction","text":"R package provides interface guildai core. R package auomatically guildai core first use, can call install_guild() directly customize installation. can install guildai package CRAN follows: {guildai} can used machine learning framework, even framework . introductory example, ’ll start Keras model applied fashion mnist dataset. ’ve used Keras R want follow along machine, can install like :","code":"install.packages(\"guildai\") guildai::install_guild() install.packages(\"keras\") library(keras) install_keras()"},{"path":[]},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"launch-a-run","dir":"Articles","previous_headings":"Hello World","what":"Launch a run","title":"Introduction","text":"start, ’ll setup sample project folder one script. training script looks like: train model guildai, use guild_run() function place source() function execute R script. example: launch new process isolated run directory using provided script. default, output stream run shown R console (output stream see source(\"fashion-mnist.R\", echo = TRUE) Rscript fashion-mnist.R).","code":"file.copy(system.file(\"examples/fashion-mnist.R\", package = \"guildai\"),           \".\", overwrite = TRUE) #> [1] TRUE library(keras)  # Prepare data ---- fashion_mnist <- dataset_fashion_mnist()  c(train_images, train_labels) %<-% fashion_mnist$train c(test_images, test_labels) %<-% fashion_mnist$test  train_images <- train_images / 255  test_images <- test_images / 255  # Define model ----  units <- 64  model <- keras_model_sequential(input_shape = c(28, 28)) model %>%   layer_flatten() %>%   layer_dense(units = units, activation = 'relu') %>%   layer_dense(units = 10, activation = 'softmax')   learning_rate <- 0.001  model %>% compile(   optimizer = optimizer_adam(learning_rate),   loss = 'sparse_categorical_crossentropy',   metrics = c('accuracy') )  model  # Fit model ----  batch_size <- 32 epochs <- 20  .fast <- TRUE if (.fast) {   n <- 1:20   train_images %<>% { .[n, ,] }   test_images %<>% { .[n, ,] }   test_labels %<>% { .[n] }   train_labels %<>% { .[n] }   epochs <- 2 }  history <- model %>%   fit(train_images, train_labels,       validation_split = 0.2,       batch_size = batch_size,       epochs = epochs,       verbose = 2)  plot(history)  # Evaluate model ----  score <- model %>%   evaluate(test_images, test_labels,            verbose = 0) %>%   as.list()  cat('test_loss:', score$loss, \"\\n\") cat('test_accuracy:', score$accuracy, \"\\n\")  # save_model_tf(model, \"model.keras\") # saveRDS(history, \"history.rds\") guild_run(\"fashion-mnist.R\") #> Replaced expression '.fast <- TRUE' on line 38 with '.fast <- FALSE' #> > library(keras) #> > # Prepare data ---- #> > fashion_mnist <- dataset_fashion_mnist() #> 2022-11-02 17:07:32.971807: E tensorflow/stream_executor/cuda/cuda_blas.cc:2981] Unable to register cuBLAS factory: Attempting to register factory for plugin cuBLAS when one has already been registered #> > c(train_images, train_labels) %<-% fashion_mnist$train #> > c(test_images, test_labels) %<-% fashion_mnist$test #> > train_images <- train_images / 255 #> >  test_images <- test_images / 255 #> > # Define model ---- #> >  #> > units <- 64 #> > model <- keras_model_sequential(input_shape = c(28, 28)) #> > model %>% #> +   layer_flatten() %>% #> +   layer_dense(units = units, activation = 'relu') %>% #> +   layer_dense(units = 10, activation = 'softmax') #> > learning_rate <- 0.001 #> > model %>% compile( #> +   optimizer = optimizer_adam(learning_rate), #> +   loss = 'sparse_categorical_crossentropy', #> +   metrics = c('accuracy') #> + ) #> > model #> Model: \"sequential\" #> ________________________________________________________________________________ #>  Layer (type)                       Output Shape                    Param #      #> ================================================================================ #>  flatten (Flatten)                  (None, 784)                     0            #>  dense_1 (Dense)                    (None, 64)                      50240        #>  dense (Dense)                      (None, 10)                      650          #> ================================================================================ #> Total params: 50,890 #> Trainable params: 50,890 #> Non-trainable params: 0 #> ________________________________________________________________________________ #> > # Fit model ---- #> >  #> > batch_size <- 32 #> > epochs <- 20 #> > .fast <- FALSE #> > if (.fast) { #> +   n <- 1:20 #> +   train_images %<>% { .[n, ,] } #> +   test_images %<>% { .[n, ,] } #> +   test_labels %<>% { .[n] } #> +   train_labels %<>% { .[n] } #> +   epochs <- 2 #> + } #> > history <- model %>% #> +   fit(train_images, train_labels, #> +       validation_split = 0.2, #> +       batch_size = batch_size, #> +       epochs = epochs, #> +       verbose = 2) #> Epoch 1/20 #> 1500/1500 - 5s - loss: 0.5445 - accuracy: 0.8128 - val_loss: 0.4428 - val_accuracy: 0.8468 - 5s/epoch - 3ms/step #> Epoch 2/20 #> 1500/1500 - 3s - loss: 0.4088 - accuracy: 0.8546 - val_loss: 0.4032 - val_accuracy: 0.8556 - 3s/epoch - 2ms/step #> Epoch 3/20 #> 1500/1500 - 3s - loss: 0.3654 - accuracy: 0.8698 - val_loss: 0.3712 - val_accuracy: 0.8701 - 3s/epoch - 2ms/step #> Epoch 4/20 #> 1500/1500 - 3s - loss: 0.3381 - accuracy: 0.8779 - val_loss: 0.3731 - val_accuracy: 0.8652 - 3s/epoch - 2ms/step #> Epoch 5/20 #> 1500/1500 - 3s - loss: 0.3189 - accuracy: 0.8821 - val_loss: 0.3356 - val_accuracy: 0.8793 - 3s/epoch - 2ms/step #> Epoch 6/20 #> 1500/1500 - 2s - loss: 0.3000 - accuracy: 0.8896 - val_loss: 0.3324 - val_accuracy: 0.8823 - 2s/epoch - 2ms/step #> Epoch 7/20 #> 1500/1500 - 3s - loss: 0.2881 - accuracy: 0.8944 - val_loss: 0.3259 - val_accuracy: 0.8843 - 3s/epoch - 2ms/step #> Epoch 8/20 #> 1500/1500 - 2s - loss: 0.2754 - accuracy: 0.8981 - val_loss: 0.3359 - val_accuracy: 0.8799 - 2s/epoch - 2ms/step #> Epoch 9/20 #> 1500/1500 - 2s - loss: 0.2691 - accuracy: 0.9009 - val_loss: 0.3361 - val_accuracy: 0.8839 - 2s/epoch - 2ms/step #> Epoch 10/20 #> 1500/1500 - 2s - loss: 0.2571 - accuracy: 0.9047 - val_loss: 0.3448 - val_accuracy: 0.8767 - 2s/epoch - 2ms/step #> Epoch 11/20 #> 1500/1500 - 2s - loss: 0.2501 - accuracy: 0.9074 - val_loss: 0.3249 - val_accuracy: 0.8878 - 2s/epoch - 2ms/step #> Epoch 12/20 #> 1500/1500 - 3s - loss: 0.2430 - accuracy: 0.9103 - val_loss: 0.3271 - val_accuracy: 0.8864 - 3s/epoch - 2ms/step #> Epoch 13/20 #> 1500/1500 - 5s - loss: 0.2369 - accuracy: 0.9122 - val_loss: 0.3311 - val_accuracy: 0.8869 - 5s/epoch - 3ms/step #> Epoch 14/20 #> 1500/1500 - 4s - loss: 0.2317 - accuracy: 0.9124 - val_loss: 0.3590 - val_accuracy: 0.8767 - 4s/epoch - 2ms/step #> Epoch 15/20 #> 1500/1500 - 3s - loss: 0.2275 - accuracy: 0.9146 - val_loss: 0.3206 - val_accuracy: 0.8917 - 3s/epoch - 2ms/step #> Epoch 16/20 #> 1500/1500 - 3s - loss: 0.2199 - accuracy: 0.9185 - val_loss: 0.3362 - val_accuracy: 0.8921 - 3s/epoch - 2ms/step #> Epoch 17/20 #> 1500/1500 - 3s - loss: 0.2150 - accuracy: 0.9201 - val_loss: 0.3251 - val_accuracy: 0.8894 - 3s/epoch - 2ms/step #> Epoch 18/20 #> 1500/1500 - 4s - loss: 0.2122 - accuracy: 0.9200 - val_loss: 0.3462 - val_accuracy: 0.8816 - 4s/epoch - 3ms/step #> Epoch 19/20 #> 1500/1500 - 3s - loss: 0.2067 - accuracy: 0.9225 - val_loss: 0.3325 - val_accuracy: 0.8905 - 3s/epoch - 2ms/step #> Epoch 20/20 #> 1500/1500 - 4s - loss: 0.2019 - accuracy: 0.9246 - val_loss: 0.3300 - val_accuracy: 0.8906 - 4s/epoch - 3ms/step #> > plot(history) #> > # Evaluate model ---- #> >  #> > score <- model %>% #> +   evaluate(test_images, test_labels, #> +            verbose = 0) %>% #> +   as.list() #> > cat('test_loss:', score$loss, \"\\n\") #> test_loss: 0.36920532584190369  #> > cat('test_accuracy:', score$accuracy, \"\\n\") #> test_accuracy: 0.88209998607635498  #> > # save_model_tf(model, \"model.keras\") #> > # saveRDS(history, \"history.rds\") #> >  #> >"},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"view-runs","dir":"Articles","previous_headings":"Hello World","what":"View Runs","title":"Introduction","text":"can view runs (including running) “Guild View” application, calling guild_view(). Guild View TODO: SCREENSHOT can retrieve data frame run information using ls_runs(): ls_runs() returns data frame information runs. sample project, ’ve launched one run, ls_runs() returns 1-row data frame.","code":"guild_view() run <- ls_runs() tibble::glimpse(run) #> Rows: 1 #> Columns: 16 #> $ label      <chr> \".fast=no batch_size=32.0 epochs=20.0 learning_rate=0.001 u… #> $ tags       <list> \"\" #> $ marked     <lgl> FALSE #> $ scalars    <list> [<tbl_df[2 x 14]>] #> $ flags      <tibble[,5]> <tbl_df[1 x 5]> #> $ operation  <chr> \"fashion-mnist.R\" #> $ started    <dttm> 2022-11-02 17:07:30 #> $ stopped    <dttm> 2022-11-02 17:08:43 #> $ comments   <list> [<tbl_df[0 x 4]>] #> $ status     <chr> \"completed\" #> $ exitStatus <int> 0 #> $ otherAttrs <df[,1]> <data.frame[1 x 1]> #> $ deps       <list> [] #> $ projectDir <chr> \"/home/tomasz/guild/guildai-r/vignettes/articles\" #> $ dir        <chr> \"/home/tomasz/guild/guildai-r/vignettes/articles/.guild/ru… #> $ id         <chr> \"e10aaf975fb04f9c9440c8db3f019997\""},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"run-directories","dir":"Articles","previous_headings":"Hello World","what":"Run Directories","title":"Introduction","text":"guild_view() ls_runs() provide two convenient ways gather present information runs. Importantly however, run directory easily accessible, everything run available plain text files. run directory also contain artifacts generated run process, like model check points. run can also used generate summary report, paramaterized quarto document:","code":"fs::dir_tree(run$dir, all=TRUE) #> /home/tomasz/guild/guildai-r/vignettes/articles/.guild/runs/e10aaf975fb04f9c9440c8db3f019997 #> ├── .guild #> │   ├── attrs #> │   │   ├── cmd #> │   │   ├── deps #> │   │   ├── env #> │   │   ├── exit_status #> │   │   ├── flags #> │   │   ├── host #> │   │   ├── id #> │   │   ├── initialized #> │   │   ├── label #> │   │   ├── op #> │   │   ├── platform #> │   │   ├── r-random-seed #> │   │   ├── run_params #> │   │   ├── sourcecode_digest #> │   │   ├── started #> │   │   ├── stopped #> │   │   ├── user #> │   │   ├── user_flags #> │   │   └── vcs_commit #> │   ├── events.out.tfevents.1667423323.horse.180500.0 #> │   ├── manifest #> │   ├── opref #> │   ├── output #> │   ├── output.index #> │   └── sourcecode #> │       └── fashion-mnist.R #> └── plots #>     └── Rplot001.png view_run_report(run$id)"},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"comparing-runs","dir":"Articles","previous_headings":"Hello World","what":"Comparing Runs","title":"Introduction","text":"Let’s make couple changes training script see can improve model performance. ’ll change number units first dense layer 128, change learning_rate 0.001 0.003 run 30 rather 20 epochs. making changes source code re-run script using guild_run() : also show us report summarizing results run, really interested comparison run previous one. individual metrics test_loss test_accuracy visible comparison table Guild View application, well can view comparison via view_runs_diff() function: comparison report shows model attributes metrics side--side, well differences source code output training script. Note view_runs_diff() default compare last two runs, however can pass two run ids like compared.","code":"#> Replaced expression 'units <- 64' on line 14 with 'units <- 128' #> Replaced expression 'learning_rate <- 0.001' on line 23 with 'learning_rate <- 0.003' #> Replaced expression 'epochs <- 20' on line 36 with 'epochs <- 30' guild_run(\"fashion-mnist.R\") view_runs_diff() #> [1] TRUE"},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"flags","dir":"Articles","previous_headings":"","what":"Flags","title":"Introduction","text":"Flags form run inputs, paramaterization. action just described, modifying learning_rate, epochs units values script launching second run, can performed guild_run() using flags interface. default, guild identifies top-level assignments scalar literals R script run flags can modified per-run. can quickly see flags available R script passing --help-op (later). can launch run different flag values like : Now, inspect run sources view_runs_diff(), see source file last run updated flag values, modified manually. flags interface useful hyperparamater optimization. ’s simplest, can use just iterate set flag values want pass guild_run(): can also pass multiple values flag, guild automatically expand combinations grid search. example, launch 4 training runs, combination flag values: Another way launch batch runs pass dataframe flags values, row corresponding run.","code":"guild_run(\"fashion-mnist.R\", \"--help-op\") #> Usage: guild run [OPTIONS] fashion-mnist.R [FLAG]... #>  #> Use 'guild run --help' for a list of options. #>  #> Flags: #>   .fast          (default is yes) #>   batch_size     (default is 32.0) #>   epochs         (default is 20.0) #>   learning_rate  (default is 0.001) #>   units          (default is 64.0) guild_run(\"fashion-mnist.R\",                flags = list(learning_rate = 0.001,                             units = 256)) for (learning_rate in c(0.001, 0.0003))   guild_run(\"fashion-mnist.R\", c(learning_rate = learning_rate)) guild_run(\"fashion-mnist.R\",            flags = list(learning_rate = c(0.001, 0.003),                        units = c(128, 256))) flags_df <- expand.grid(learning_rate = c(0.001, 0.003),                         units = c(128, 256)) flags_df #>   learning_rate units #> 1         0.001   128 #> 2         0.003   128 #> 3         0.001   256 #> 4         0.003   256 guild_run(\"fashion-mnist.R\", flags = flags_df)"},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"flag-annotations","dir":"Articles","previous_headings":"Flags","what":"Flag annotations","title":"Introduction","text":"can optionally supply additional metadata individual flags placing hashpipe yaml annotations flag expression. example, can update “fashion-mnist.R” script following lines: Now, descriptions constraints appear --help-op related locations.","code":"#| description: size of first layer. #| min: 16 #| max: 256 units <- 32  #| description: Activation function to use. #| choices: [relu, sigmoid, tanh] activation <- \"relu\""},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"flag-destinations","dir":"Articles","previous_headings":"Flags","what":"Flag destinations","title":"Introduction","text":"project grows, ’s helpful able move flag definitions main R script. , can include flags-dest frontmatter R script, specifying file guild update flag values. can read flags using source() similar. YAML files also supported flags destination:","code":"#| flags-dest: ./flags.R  FLAGS <- envir::include(\"flags.R\", new.env()) #| flags-dest: ./flags.yml  FLAGS <- yaml::read_yaml(\"flags.yml\")"},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"retreiving-run-flags","dir":"Articles","previous_headings":"Flags","what":"Retreiving Run Flags","title":"Introduction","text":"flags flag values associated runs returned ls_runs() nested dataframe flags.","code":"runs <- ls_runs() runs %>%   select(id, flags) #> # A tibble: 2 × 2 #>   id                               flags$.fast $batch_s…¹ $epochs $lear…² $units #>   <chr>                            <lgl>            <dbl>   <dbl>   <dbl>  <dbl> #> 1 b7f82479b63c469e95bd71e7ab05aa18 FALSE               32      30   0.003    128 #> 2 e10aaf975fb04f9c9440c8db3f019997 FALSE               32      20   0.001     64 #> # … with abbreviated variable names ¹​$batch_size, ²​$learning_rate"},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"scalars","dir":"Articles","previous_headings":"","what":"Scalars","title":"Introduction","text":"counterpart run flags run scalars. Whereas flags special type run input guild can help manage, scalars special type run output guild can help manage. see guild automatically identified test_accuracy test_loss run scalar outputs. default, lines printed standard output run pattern \"key: <numeric-value>\" recorded guild scalars. printing values scalar key multiple times run (e.g, loss training loop), sure also print step scalar , enable guild track history (enable visualization run metrics tensorboard). run process produces tfevent records directly (e.g., keras::callback_tensorboard(\"./logs\")), also automatically identified guild run scalars, included ls_runs() (guild_view(), tensorboard run views). ls_runs() returns summary run scalars, full set scalars observed runs can also accessed R directly:","code":"runs %>%   select(id, scalars) #> # A tibble: 2 × 2 #>   id                               scalars           #>   <chr>                            <list>            #> 1 b7f82479b63c469e95bd71e7ab05aa18 <tibble [2 × 14]> #> 2 e10aaf975fb04f9c9440c8db3f019997 <tibble [2 × 14]>  glimpse(runs$scalars[[1]]) #> Rows: 2 #> Columns: 14 #> $ run        <chr> \"b7f82479b63c469e95bd71e7ab05aa18\", \"b7f82479b63c469e95bd71… #> $ prefix     <chr> \".guild\", \".guild\" #> $ tag        <chr> \"test_accuracy\", \"test_loss\" #> $ first_val  <dbl> 0.8676000, 0.4961661 #> $ first_step <int> 0, 0 #> $ last_val   <dbl> 0.8676000, 0.4961661 #> $ last_step  <int> 0, 0 #> $ min_val    <dbl> 0.8676000, 0.4961661 #> $ min_step   <int> 0, 0 #> $ max_val    <dbl> 0.8676000, 0.4961661 #> $ max_step   <int> 0, 0 #> $ avg_val    <dbl> 0.8676000, 0.4961661 #> $ total      <dbl> 0.8676000, 0.4961661 #> $ count      <int> 1, 1 ls_scalars() #> # A tibble: 4 × 5 #>   run                              path   tag           value  step #>   <chr>                            <chr>  <chr>         <dbl> <dbl> #> 1 b7f82479b63c469e95bd71e7ab05aa18 .guild test_loss     0.496     0 #> 2 b7f82479b63c469e95bd71e7ab05aa18 .guild test_accuracy 0.868     0 #> 3 e10aaf975fb04f9c9440c8db3f019997 .guild test_loss     0.369     0 #> 4 e10aaf975fb04f9c9440c8db3f019997 .guild test_accuracy 0.882     0"},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"managing-runs","dir":"Articles","previous_headings":"","what":"Managing runs","title":"Introduction","text":"Guild comes comprehensive set functions managing runs. annotate runs: runs_comment(), runs_mark() runs_tag(). move, archive, copy runs: runs_export() runs_import() delete runs: runs_delete() runs_purge() runs_restore() runs_* family functions take runs first argument, can conveniently composed %>% ls_runs() ls_scalars(). example: runs can supplied like dataframe returned ls_runs() ls_scalars() like example . runs can also character vector flexible syntax supported specifying runs selections. See ?resolve_run_ids() details.","code":"library(dplyr)  top3_runs <- ls_scalars() %>%    filter(tag == \"test_accuracy\") %>%    slice_max(value, n = 3)  top3_runs #> # A tibble: 2 × 5 #>   run                              path   tag           value  step #>   <chr>                            <chr>  <chr>         <dbl> <dbl> #> 1 e10aaf975fb04f9c9440c8db3f019997 .guild test_accuracy 0.882     0 #> 2 b7f82479b63c469e95bd71e7ab05aa18 .guild test_accuracy 0.868     0  top3_runs %>%    runs_tag(\"top3\") %>%    runs_export(\"./top3-runs\")"},{"path":"https://t-kalinowski.github.io/guildai-r/articles/intro.html","id":"using-guild-from-the-terminal","dir":"Articles","previous_headings":"","what":"Using guild from the terminal","title":"Introduction","text":"guild can also used directly terminal. Call R function export_guild_cli() place guild executable PATH: can launch runs perform guild operations terminal: move terminal R console, almost syntax supported terminal can used R passing strings:","code":"export_guild_cli(dest = \"~/bin\") guild run fashion-mnist.R guild run fashion-mnist.R batch_size='[32,64]' guild_run(\"fashion-mnist.R\", 'batch_size=[32,64]') knitr::knit_exit()"},{"path":"https://t-kalinowski.github.io/guildai-r/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Tomasz Kalinowski. Author, copyright holder, maintainer.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Kalinowski T (2022). guildai: R interface guildai. R package version 0.0.0.9001, https://t-kalinowski.github.io/guildai-r/.","code":"@Manual{,   title = {guildai: R interface to guildai},   author = {Tomasz Kalinowski},   year = {2022},   note = {R package version 0.0.0.9001},   url = {https://t-kalinowski.github.io/guildai-r/}, }"},{"path":[]},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"guildai","dir":"","previous_headings":"","what":"guildai","title":"R interface to guildai","text":"guildai provides suite tools tracking, visualizing, managing training runs experiments. {guildai} R package successor {tfruns} package. Track hyperparameters, metrics, output, source code every training run. Compare hyperparmaeters metrics across runs find best performing model. Automatically generate reports visualize individual training runs comparisons runs. changes source code required.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"R interface to guildai","text":"R package provides interface Guild AI Core. R package automatically download install Guild AI Core first use, can call install_guild() directly customize installation. can install guildai package follows: Guild AI can used machine learning framework, even framework . introductory example, ’ll start Keras model applied fashion mnist dataset. ’ve used Keras R want follow along machine, can install like :","code":"# install.packages(\"guildai\") remotes::install_github(\"t-kalinowski/guildai-r\") guildai::install_guild() install.packages(\"keras\") keras::install_keras()"},{"path":[]},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"launch-a-run","dir":"","previous_headings":"Hello World","what":"Launch a run","title":"R interface to guildai","text":"start, ’ll use example training script. looks like: train model guildai, use guild_run() function place source() function execute R script. example: launch new R process isolated run directory using provided script. default, output stream run shown R console (output stream see source(\"train.R\", echo = TRUE) R --file=train.R).","code":"library(keras)  # Prepare data ----  fashion_mnist <- dataset_fashion_mnist()  c(train_images, train_labels) %<-% fashion_mnist$train c(test_images, test_labels) %<-% fashion_mnist$test  train_images <- train_images / 255 test_images <- test_images / 255  # Define model ----  units <- 64  model <- keras_model_sequential(input_shape = c(28, 28)) %>%   layer_flatten() %>%   layer_dense(units = units, activation = 'relu') %>%   layer_dense(units = 10, activation = 'softmax')   learning_rate <- 0.001  model %>% compile(   optimizer = optimizer_adam(learning_rate),   loss = 'sparse_categorical_crossentropy',   metrics = c('accuracy') )  model  # Fit model ----  batch_size <- 32 epochs <- 10  history <- model %>%   fit(train_images, train_labels,       validation_split = 0.2,       batch_size = batch_size,       epochs = epochs,       verbose = 2)  plot(history)  # Evaluate model ----  score <- model %>%   evaluate(test_images, test_labels,            verbose = 0) %>%   as.list()  cat('test_loss:', score$loss, \"\\n\") cat('test_accuracy:', score$accuracy, \"\\n\")  # save_model_tf(model, \"model.keras\") # saveRDS(history, \"history.rds\") guild_run(\"train.R\") #> > library(keras) #> > # Prepare data ---- #> > #> > fashion_mnist <- dataset_fashion_mnist() #> > c(train_images, train_labels) %<-% fashion_mnist$train #> > c(test_images, test_labels) %<-% fashion_mnist$test #> > train_images <- train_images / 255 #> > test_images <- test_images / 255 #> > # Define model ---- #> > #> > units <- 64 #> > model <- keras_model_sequential(input_shape = c(28, 28)) %>% #> +   layer_flatten() %>% #> +   layer_dense(units = units, activation = 'relu') %>% #> +   layer_dense(units = 10, activation = 'softmax') #> > learning_rate <- 0.001 #> > model %>% compile( #> +   optimizer = optimizer_adam(learning_rate), #> +   loss = 'sparse_categorical_crossentropy', #> +   metrics = c('accuracy') #> + ) #> > model #> Model: \"sequential\" #> ________________________________________________________________________________ #>  Layer (type)                       Output Shape                    Param # #> ================================================================================ #>  flatten (Flatten)                  (None, 784)                     0 #>  dense_1 (Dense)                    (None, 64)                      50240 #>  dense (Dense)                      (None, 10)                      650 #> ================================================================================ #> Total params: 50,890 #> Trainable params: 50,890 #> Non-trainable params: 0 #> ________________________________________________________________________________ #> > # Fit model ---- #> > #> > batch_size <- 32 #> > epochs <- 10 #> > history <- model %>% #> +   fit(train_images, train_labels, #> +       validation_split = 0.2, #> +       batch_size = batch_size, #> +       epochs = epochs, #> +       verbose = 2) #> Epoch 1/10 #> 1500/1500 - 4s - loss: 0.5422 - accuracy: 0.8121 - val_loss: 0.4255 - val_accuracy: 0.8508 - 4s/epoch - 2ms/step #> Epoch 2/10 #> 1500/1500 - 3s - loss: 0.4069 - accuracy: 0.8549 - val_loss: 0.4219 - val_accuracy: 0.8403 - 3s/epoch - 2ms/step #> Epoch 3/10 #> 1500/1500 - 3s - loss: 0.3692 - accuracy: 0.8658 - val_loss: 0.3648 - val_accuracy: 0.8678 - 3s/epoch - 2ms/step #> Epoch 4/10 #> 1500/1500 - 2s - loss: 0.3400 - accuracy: 0.8773 - val_loss: 0.3619 - val_accuracy: 0.8742 - 2s/epoch - 2ms/step #> Epoch 5/10 #> 1500/1500 - 3s - loss: 0.3226 - accuracy: 0.8829 - val_loss: 0.3411 - val_accuracy: 0.8759 - 3s/epoch - 2ms/step #> Epoch 6/10 #> 1500/1500 - 2s - loss: 0.3076 - accuracy: 0.8869 - val_loss: 0.3860 - val_accuracy: 0.8612 - 2s/epoch - 2ms/step #> Epoch 7/10 #> 1500/1500 - 2s - loss: 0.2975 - accuracy: 0.8901 - val_loss: 0.3387 - val_accuracy: 0.8813 - 2s/epoch - 1ms/step #> Epoch 8/10 #> 1500/1500 - 2s - loss: 0.2851 - accuracy: 0.8951 - val_loss: 0.3346 - val_accuracy: 0.8807 - 2s/epoch - 1ms/step #> Epoch 9/10 #> 1500/1500 - 2s - loss: 0.2753 - accuracy: 0.8992 - val_loss: 0.3252 - val_accuracy: 0.8829 - 2s/epoch - 1ms/step #> Epoch 10/10 #> 1500/1500 - 2s - loss: 0.2675 - accuracy: 0.8999 - val_loss: 0.3257 - val_accuracy: 0.8820 - 2s/epoch - 1ms/step #> > plot(history) #> > # Evaluate model ---- #> > #> > score <- model %>% #> +   evaluate(test_images, test_labels, #> +            verbose = 0) %>% #> +   as.list() #> > cat('test_loss:', score$loss, \"\\n\") #> test_loss: 0.34975650906562805 #> > cat('test_accuracy:', score$accuracy, \"\\n\") #> test_accuracy: 0.87470000982284546 #> > # save_model_tf(model, \"model.keras\") #> > # saveRDS(history, \"history.rds\") #> > #> >"},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"view-runs","dir":"","previous_headings":"Hello World","what":"View Runs","title":"R interface to guildai","text":"can view runs (including running) “Guild View” application, calling guild_view(). Guild View App run manager visualizer. can use search, filter, visualize, compare, view diffs run source code output, ! also bundles TensorBoard additional visualization tool viewing runs. TODO: SCREENSHOTS can retrieve data frame run information R using ls_runs(): ls_runs() returns data frame information runs. introduction far, ’ve launched 1 run, ls_runs() returns 1-row data frame.","code":"guild_view() run <- ls_runs() tibble::glimpse(run) #> Rows: 1 #> Columns: 16 #> $ label      <chr> \"batch_size=32.0 epochs=10.0 learning_rate=0.001 units=64.0\" #> $ tags       <list> \"\" #> $ marked     <lgl> FALSE #> $ scalars    <list> [<tbl_df[2 x 14]>] #> $ flags      <tibble[,4]> <tbl_df[1 x 4]> #> $ operation  <chr> \"train.R\" #> $ started    <dttm> 2022-11-03 12:34:20 #> $ stopped    <dttm> 2022-11-03 12:34:52 #> $ comments   <list> [<tbl_df[0 x 4]>] #> $ status     <chr> \"completed\" #> $ exitStatus <int> 0 #> $ otherAttrs <df[,1]> <data.frame[1 x 1]> #> $ deps       <list> [] #> $ projectDir <chr> \"/home/tomasz/guild/guildai-r\" #> $ dir        <chr> \"/home/tomasz/guild/guildai-r/.guild/runs/511a690cbb914713a… #> $ id         <chr> \"511a690cbb914713a255ebfb97af1769\""},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"run-directories","dir":"","previous_headings":"Hello World","what":"Run Directories","title":"R interface to guildai","text":"guild_view() ls_runs() provide two convenient ways gather present information runs. Importantly however, run directory easily accessible. ’ll find files, plots, logs, output generated run. run directory also contain additional metadata runs guild recorded plain text files, like starting random seed, environment variables, information package versions, metadata frequently useful reproducability. run can also used generate summary report, paramaterized quarto document:","code":"fs::dir_tree(run$dir[1], all = TRUE) #> /home/tomasz/guild/guildai-r/.guild/runs/511a690cbb914713a255ebfb97af1769 #> ├── .guild #> │   ├── attrs #> │   │   ├── cmd #> │   │   ├── deps #> │   │   ├── env #> │   │   ├── exit_status #> │   │   ├── flags #> │   │   ├── host #> │   │   ├── id #> │   │   ├── initialized #> │   │   ├── label #> │   │   ├── op #> │   │   ├── platform #> │   │   ├── r-random-seed #> │   │   ├── run_params #> │   │   ├── sourcecode_digest #> │   │   ├── started #> │   │   ├── stopped #> │   │   ├── user #> │   │   ├── user_flags #> │   │   └── vcs_commit #> │   ├── events.out.tfevents.1667493292.horse.265913.0 #> │   ├── manifest #> │   ├── opref #> │   ├── output #> │   ├── output.index #> │   └── sourcecode #> │       └── train.R #> └── plots #>     └── Rplot001.png view_run_report(run$id)"},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"comparing-runs","dir":"","previous_headings":"Hello World","what":"Comparing Runs","title":"R interface to guildai","text":"Let’s make couple changes training script see can improve model performance. ’ll change number units first dense layer 128, change learning_rate 0.001 0.003 run 20 rather 10 epochs. making changes source code re-run script using guild_run() : also show us report summarizing results run, really interested comparison run previous one. individual metrics test_loss test_accuracy visible comparison table Guild View application. can also view just diffs two runs view_runs_diff() function: comparison report shows diffs run output, sourcecode, metrics, recorded run.","code":"guild_run(\"train.R\") ls_runs(1:2) %>% # select the last 2 runs   view_runs_diff()"},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"flags","dir":"","previous_headings":"","what":"Flags","title":"R interface to guildai","text":"Flags form run inputs, paramaterization. action just described, modifying learning_rate, epochs units values script launching second run, can performed guild_run() using flags interface. default, guild identifies top-level assignments scalar literals R script run flags can modified per-run. Flags can numerics (doubles, integers, complex), strings, booleans. words, expressions like R script identified flags: can quickly see flags available R script passing --help-op (syntax later). can launch run different flag values like : Now, inspect run sources view_runs_diff(), see source file last run updated flag values, modified manually. flags interface useful hyperparamater optimization. ’s simplest, can iterate set flag values want pass separate calls guild_run(): can also pass multiple values flag, guild automatically expand combinations grid search. example, launch 4 training runs, run unique pairing flag values: Another way launch batch runs pass data frame flags values, row corresponding run.","code":"units <- 64 learning_rate <- 0.001 batch_size <- 32 epochs <- 10 guild_run(\"train.R\", \"--help-op\") #> Usage: guild run [OPTIONS] train.R [FLAG]... #> #> Use 'guild run --help' for a list of options. #> #> Flags: #>   batch_size     (default is 32.0) #>   epochs         (default is 10.0) #>   learning_rate  (default is 0.001) #>   units          (default is 64.0) guild_run(\"train.R\", flags = list(   learning_rate = 0.001,   units = 256 )) for (learning_rate in c(0.001, 0.0003))   guild_run(\"train.R\", c(learning_rate = learning_rate)) guild_run(\"train.R\",           flags = list(learning_rate = c(0.001, 0.003),                        units = c(128, 256))) flags_df <- expand.grid(learning_rate = c(0.001, 0.003),                         units = c(128, 256)) flags_df #>   learning_rate units #> 1         0.001   128 #> 2         0.003   128 #> 3         0.001   256 #> 4         0.003   256 guild_run(\"train.R\", flags = flags_df)"},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"flag-annotations","dir":"","previous_headings":"Flags","what":"Flag annotations","title":"R interface to guildai","text":"can optionally supply additional metadata individual flags placing hashpipe yaml annotations flag expression. example, can update “train.R” script following lines: Now, descriptions constraints appear --help-op related locations.","code":"#| description: size of first layer. #| min: 16 #| max: 256 units <- 32  #| description: Activation function to use. #| choices: [relu, sigmoid, tanh] activation <- \"relu\""},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"flag-destinations","dir":"","previous_headings":"Flags","what":"Flag destinations","title":"R interface to guildai","text":"project grows, ’s helpful able move flag definitions main R script. , can include flags-dest frontmatter R script, specifying file guild read update flag values. can read flag values main R script using source() similar. YAML files also supported flags destination:","code":"#| flags-dest: ./flags.R  FLAGS <- envir::include(\"flags.R\", new.env()) #| flags-dest: ./flags.yml  FLAGS <- yaml::read_yaml(\"flags.yml\")"},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"retreiving-run-flags","dir":"","previous_headings":"Flags","what":"Retreiving Run Flags","title":"R interface to guildai","text":"flags flag values associated runs returned ls_runs() nested dataframe flags name.","code":"runs <- ls_runs() runs %>%   select(id, flags) #> # A tibble: 2 × 2 #>   id                               flags$batch_size $epochs $learning_r…¹ $units #>   <chr>                                       <dbl>   <dbl>         <dbl>  <dbl> #> 1 33bd62ef1c8c4d4c89b9f9d16150c2eb               32      20         0.003    128 #> 2 511a690cbb914713a255ebfb97af1769               32      10         0.001     64 #> # … with abbreviated variable name ¹​$learning_rate"},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"scalars","dir":"","previous_headings":"","what":"Scalars","title":"R interface to guildai","text":"counterpart run flags run scalars. Whereas flags special type run input guild can help manage, scalars special type run output guild can help manage. see guild automatically identified test_accuracy test_loss run scalar outputs. default, lines printed standard output run pattern \"key: <numeric-value>\" recorded guild scalars. printing values scalar key multiple times run (e.g, loss training loop), sure also print step scalar , enable guild track history (enable visualization run metrics Guild View TensorBoard). run process produces tfevent records (e.g., keras::callback_tensorboard()), also automatically identified guild run scalars, included ls_runs() (guild_view(), TensorBoard run views). ls_runs() returns summary run scalars, full set scalars observed runs can also accessed R directly:","code":"runs %>%   select(id, scalars) #> # A tibble: 2 × 2 #>   id                               scalars #>   <chr>                            <list> #> 1 33bd62ef1c8c4d4c89b9f9d16150c2eb <tibble [2 × 14]> #> 2 511a690cbb914713a255ebfb97af1769 <tibble [2 × 14]>  glimpse(runs$scalars[[1]]) #> Rows: 2 #> Columns: 14 #> $ run        <chr> \"33bd62ef1c8c4d4c89b9f9d16150c2eb\", \"33bd62ef1c8c4d4c89b9f9… #> $ prefix     <chr> \".guild\", \".guild\" #> $ tag        <chr> \"test_accuracy\", \"test_loss\" #> $ first_val  <dbl> 0.8759000, 0.4181767 #> $ first_step <int> 0, 0 #> $ last_val   <dbl> 0.8759000, 0.4181767 #> $ last_step  <int> 0, 0 #> $ min_val    <dbl> 0.8759000, 0.4181767 #> $ min_step   <int> 0, 0 #> $ max_val    <dbl> 0.8759000, 0.4181767 #> $ max_step   <int> 0, 0 #> $ avg_val    <dbl> 0.8759000, 0.4181767 #> $ total      <dbl> 0.8759000, 0.4181767 #> $ count      <int> 1, 1 ls_scalars() #> # A tibble: 4 × 5 #>   run                              path   tag           value  step #>   <chr>                            <chr>  <chr>         <dbl> <dbl> #> 1 33bd62ef1c8c4d4c89b9f9d16150c2eb .guild test_loss     0.418     0 #> 2 33bd62ef1c8c4d4c89b9f9d16150c2eb .guild test_accuracy 0.876     0 #> 3 511a690cbb914713a255ebfb97af1769 .guild test_loss     0.350     0 #> 4 511a690cbb914713a255ebfb97af1769 .guild test_accuracy 0.875     0"},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"managing-runs","dir":"","previous_headings":"","what":"Managing runs","title":"R interface to guildai","text":"Guild comes comprehensive set functions managing runs. annotate runs: runs_comment(), runs_mark() runs_tag(). move, archive, copy runs: runs_export() runs_import() delete runs: runs_delete() runs_purge() runs_restore() runs_* family functions take runs first argument, can composed %>% ls_runs() ls_scalars(). example: runs arguments can supplied dataframe returned ls_runs() ls_scalars(), like example . runs can also character vector, flexible syntax supported specifying runs selections: runs can id, integer (n-th last run), filter specification like --running. See resolve_run_ids(\"--help\") details.","code":"library(dplyr)  top3_runs <- ls_scalars() %>%   filter(tag == \"test_accuracy\") %>%   slice_max(value, n = 3)  top3_runs #> # A tibble: 2 × 5 #>   run                              path   tag           value  step #>   <chr>                            <chr>  <chr>         <dbl> <dbl> #> 1 33bd62ef1c8c4d4c89b9f9d16150c2eb .guild test_accuracy 0.876     0 #> 2 511a690cbb914713a255ebfb97af1769 .guild test_accuracy 0.875     0  top3_runs %>%   runs_tag(\"top3\") %>%   runs_export(\"./top3-runs\")"},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"supplying-guild-options","dir":"","previous_headings":"","what":"Supplying guild options","title":"R interface to guildai","text":"https://.guild.ai/t/user-config-reference/173 Guild options can supplied hashpipe yaml frontmatter script. example, can inform guild script operation store csv files project part run directory modifying front script like : comprehensive listing options can supplied guild via script frontmatter can found ","code":"#| flags-dest: ./flags.R #| sourcecode: #|   - exclude: '*.csv'"},{"path":"https://t-kalinowski.github.io/guildai-r/index.html","id":"using-guild-from-the-terminal","dir":"","previous_headings":"","what":"Using guild from the terminal","title":"R interface to guildai","text":"guild can also used directly terminal. Call R function export_guild_cli() place guild executable installed guildai::install_guild() PATH: can launch runs perform guild operations terminal: move terminal R console, almost syntax supported terminal can used R passing strings respective R functions. default, R character vectors supplied ... throughout R functions quoted system shell passed guild. enables usage like: additional conveniences provided passing command line options R. Use () avoid quoting string shell, allowing pass multiple arguments single string. arguments take values, can pass R named arguments. five different R expressions invoke guild identical system calls.","code":"export_guild_cli(dest = \"~/bin\") guild run train.R guild run train.R batch_size='[32,64]' guild_run(\"train.R\", 'batch_size=[32,64]') ls_runs(I(\"--marked --started 'last hour'\")) ls_runs(\"--marked\", \"--started\" = \"last hour\") ls_runs(\"--marked\", \"--started\", \"last hour\") ls_runs(c(\"--marked\", \"--started\", \"last hour\")) ls_runs(\"--marked\", c(\"--started\", \"last hour\")) knitr::knit_exit()"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/export_guild_cli.html","id":null,"dir":"Reference","previous_headings":"","what":"Export guild for usage in the Terminal — export_guild_cli","title":"Export guild for usage in the Terminal — export_guild_cli","text":"Export guild usage Terminal","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/export_guild_cli.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export guild for usage in the Terminal — export_guild_cli","text":"","code":"export_guild_cli(dest = \"~/bin\", completions = TRUE)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/export_guild_cli.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Export guild for usage in the Terminal — export_guild_cli","text":"dest place guild executable. location PATH. completions Whether also install shell completion helpers.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/export_guild_cli.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Export guild for usage in the Terminal — export_guild_cli","text":"path guild executable, invisibly","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_merge.html","id":null,"dir":"Reference","previous_headings":"","what":"Copy run files into the current project working directory — guild_merge","title":"Copy run files into the current project working directory — guild_merge","text":"Copy run files current project working directory","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_merge.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Copy run files into the current project working directory — guild_merge","text":"","code":"guild_merge(run = NULL, ...)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_merge.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Copy run files into the current project working directory — guild_merge","text":"run run selection ... passed guild","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_merge.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Copy run files into the current project working directory — guild_merge","text":"","code":"if(FALSE) { guild_merge(\"--help\") ls_scalars() %>%   dplyr::slice_max(\"epoch_acc\") %>%   guild_merge(I(\"--yes --replace\")) }"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_run.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch a guild run — guild_run","title":"Launch a guild run — guild_run","text":"Launch guild run","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_run.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch a guild run — guild_run","text":"","code":"guild_run(   opspec = \"train.R\",   flags = NULL,   ...,   wait = TRUE,   label = NULL,   tags = NULL,   echo = wait )"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_run.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Launch a guild run — guild_run","text":"opspec typically path R script, scalar string guild recognizes valid opspec. flags named list vector like c(noise = .3, dropout = .4) scalar string like \"noise=.3 dropout=.4\" dataframe flags batch runs ... Arguments passed base::system2 command system command invoked, character string. args character vector arguments command. stdout,stderr output stdout     stderr sent.  Possible values \"\", R     console (default), NULL FALSE (discard output),     TRUE (capture output character vector)     character string naming file. stdin input diverted?  \"\" means default,     alternatively character string naming file.  Ignored     input supplied. input character vector supplied, copied one     string per line temporary file, standard input     command redirected file. env character vector name=value strings set environment     variables. timeout timeout seconds, ignored 0.  limit     elapsed time running command separate process.   Fractions     seconds ignored. minimized,invisible arguments accepted Windows     ignored platform, warning. wait whether wait run finish label, tags optional strings used label tag experiments. echo whether output run shown current R console. Note, effect whether expressions echoed guild run stdout.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_run.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Launch a guild run — guild_run","text":"return value system2(), invisibly. function primarily called side effect.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_view.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch Guild Viewer — guild_view","title":"Launch Guild Viewer — guild_view","text":"Launch Guild Viewer","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_view.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch Guild Viewer — guild_view","text":"","code":"guild_view(runs = NULL, ..., wait = FALSE)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_view.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Launch Guild Viewer — guild_view","text":"runs optional runs selection. ... passed guild executable. Pass --help see options. wait whether block R console application active.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/guild_view.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Launch Guild Viewer — guild_view","text":"","code":"if(FALSE) {   guild_view()    # see all supported options   guild_view(\"--help\")    # three valid ways of supplying args to the guild executable   guild_view(\"--port\" = \"5678\")   guild_view(\"--port\", \"5678\")   guild_view(c(\"--port\", \"5678\")) }"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/install_guild.html","id":null,"dir":"Reference","previous_headings":"","what":"Install guildai core — install_guild","title":"Install guildai core — install_guild","text":"installs guild executable use package.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/install_guild.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Install guildai core — install_guild","text":"","code":"install_guild(   guildai = \"https://api.github.com/repos/guildai/guildai/tarball/HEAD\",   python = find_python() )"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/install_guild.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Install guildai core — install_guild","text":"guildai character vector passed directly pip install. install release version guildai, can \"guildai\". python path python binary, used create private venv.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/install_guild.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Install guildai core — install_guild","text":"path guild binary","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/install_guild.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Install guildai core — install_guild","text":"","code":"# install_guild(c(\"-e\", \"~/guild/guildai\")) # install_guild(\"~/guildai\", reticulate::install_python()) # install_guild(\"https://api.github.com/repos/guildai/guildai/tarball/HEAD\") # install_guild( #   guildai = \"https://api.github.com/repos/guildai/guildai/tarball/HEAD\", #   python = reticulate::install_python()) #"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/is_run_active.html","id":null,"dir":"Reference","previous_headings":"","what":"Is code executing in the context of a guild run? — is_run_active","title":"Is code executing in the context of a guild run? — is_run_active","text":"code executing context guild run?","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/is_run_active.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Is code executing in the context of a guild run? — is_run_active","text":"","code":"is_run_active()"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/is_run_active.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Is code executing in the context of a guild run? — is_run_active","text":"Boolean","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/ls_runs.html","id":null,"dir":"Reference","previous_headings":"","what":"list guild runs — ls_runs","title":"list guild runs — ls_runs","text":"list guild runs","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/ls_runs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"list guild runs — ls_runs","text":"","code":"ls_runs(...)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/ls_runs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"list guild runs — ls_runs","text":"... additional arguments passed guild api runs. Try \"--help\" see options.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/ls_runs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"list guild runs — ls_runs","text":"dataframe runs","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/ls_runs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"list guild runs — ls_runs","text":"","code":"if (FALSE) { withr::with_package(\"dplyr\", {  ## sort and filter using scalars pluck_scalar <- function(scalar_summary_df, val, tag, prefix = \".guild\") {   if(!length(scalar_summary_df)) return(NA)   out <- scalar_summary_df %>%     filter(tag == {{ tag }}, prefix == {{ prefix }}) %>%     pull({{ val }})   if(length(out) < 1)     out <- NA   out }  runs <- ls_runs() runs %>%   rowwise() %>%   mutate(     min_val_loss =       pluck_scalar(scalars, min_val, \"epoch_loss\", \"logs/validation\"),     .after = label) %>%   ungroup() %>%   slice_min(min_val_loss, n = 5)  }) }"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/ls_scalars.html","id":null,"dir":"Reference","previous_headings":"","what":"Get full set of runs scalars — ls_scalars","title":"Get full set of runs scalars — ls_scalars","text":"Get full set runs scalars","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/ls_scalars.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get full set of runs scalars — ls_scalars","text":"","code":"ls_scalars(runs = NULL, ...)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/ls_scalars.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get full set of runs scalars — ls_scalars","text":"runs runs selection ... passed go guild","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/ls_scalars.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get full set of runs scalars — ls_scalars","text":"tibble runs scalars","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/ls_scalars.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get full set of runs scalars — ls_scalars","text":"","code":"if (FALSE) { ls_scalars(1) # scalars from most recent run ls_scalars(1:2) # scalars form two most recent runs  # pass in a dataframe of runs ls_runs() %>%   filter(flags$epochs > 5) %>%   ls_scalars() }"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/resolve_run_ids.html","id":null,"dir":"Reference","previous_headings":"","what":"Resolve run ids — resolve_run_ids","title":"Resolve run ids — resolve_run_ids","text":"guild supports rich syntax runs selection throughout api. selection syntax shared ls_* runs_* families functions: ls_runs(), ls_scalars(), runs_comment(), runs_label(), runs_mark(), runs_tag() runs_delete(),runs_purge(), runs_restore(), runs_export(), runs_import().","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/resolve_run_ids.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Resolve run ids — resolve_run_ids","text":"","code":"resolve_run_ids(runs = NULL, ...)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/resolve_run_ids.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Resolve run ids — resolve_run_ids","text":"runs runs selection. data.frame, columns id run used run id. Otherwise, argument coerced character vector, passed guild runs filter selection. Wrap string () avoid quoting argument shell. ... arguments passed guild","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/resolve_run_ids.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Resolve run ids — resolve_run_ids","text":"character vector run ids.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/resolve_run_ids.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Resolve run ids — resolve_run_ids","text":"","code":"if(FALSE) { resolve_run_ids() # returns all run ids. resolve_run_ids(1) # last run resolve_run_ids(1:2) # last 2 runs resolve_run_ids(1:2, \"--operation\" = \"train.py\")  # three ways of getting ids for the currently staged or running runs resolve_run_ids(\"--staged\", \"--running\") resolve_run_ids(c(\"--staged\", \"--running\")) resolve_run_ids(I(\"--staged --running\"))  # resolve_run_ids() uses the same selection rules and syntax as ls_runs() stopifnot(identical(   resolve_run_ids(1),   ls_runs(1)$id )) }"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_copy.html","id":null,"dir":"Reference","previous_headings":"","what":"Move or copy runs — runs_copy","title":"Move or copy runs — runs_copy","text":"Move copy runs","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_copy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Move or copy runs — runs_copy","text":"","code":"runs_copy(runs = NULL, location, ..., copy_resources = FALSE)  runs_move()"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_copy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Move or copy runs — runs_copy","text":"runs runs selection location directory place runs ... passed guild copy_resources whether run resources also copied. FALSE, (default), run resources run directory symlinks guild managed storage location.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_copy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Move or copy runs — runs_copy","text":"NULL, invisibly","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_delete.html","id":null,"dir":"Reference","previous_headings":"","what":"Delete runs — runs_delete","title":"Delete runs — runs_delete","text":"Delete runs","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_delete.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Delete runs — runs_delete","text":"","code":"runs_delete(runs = NULL, ...)  runs_purge(runs = NULL, ...)  runs_restore(runs = NULL, ...)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_delete.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Delete runs — runs_delete","text":"runs runs selection ... passed guild()","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_delete.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Delete runs — runs_delete","text":"runs_delete() moves runs guild managed \"trash\" directory. runs_restore() moves runs back main guild managed \"runs\" directory. runs_purge() permanently delete runs \"trash\" directory. deleted runs can purged.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_delete.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Delete runs — runs_delete","text":"see deleted runs, guildai:::guild(\"runs list --deleted\") (ls_runs(\"--deleted\") supported soon)","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_export.html","id":null,"dir":"Reference","previous_headings":"","what":"Move or copy runs — runs_export","title":"Move or copy runs — runs_export","text":"Move copy runs","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_export.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Move or copy runs — runs_export","text":"","code":"runs_export(runs = NULL, location, ..., move = FALSE, copy_resources = FALSE)  runs_import(runs = NULL, location, ..., move = FALSE, copy_resources = FALSE)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_export.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Move or copy runs — runs_export","text":"runs runs selection location directory place runs, find runs. ... passed guild move bool, whether runs moved copied import export operation. copy_resources whether run resources also copied. FALSE, (default), run resources run directory symlinks guild managed storage location.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_export.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Move or copy runs — runs_export","text":"NULL, invisibly","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_info.html","id":null,"dir":"Reference","previous_headings":"","what":"list guild runs — runs_info","title":"list guild runs — runs_info","text":"list guild runs","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"list guild runs — runs_info","text":"","code":"runs_info(..., full = FALSE)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"list guild runs — runs_info","text":"... additional arguments passed `guild api runs`. Try `\"--help\"` see options. full Whether include available run info.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"list guild runs — runs_info","text":"dataframe runs","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_label.html","id":null,"dir":"Reference","previous_headings":"","what":"Annotate runs — runs_label","title":"Annotate runs — runs_label","text":"Annotate runs","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_label.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Annotate runs — runs_label","text":"","code":"runs_label(runs = NULL, label = NULL, ..., clear = FALSE)  runs_tag(runs = NULL, add = NULL, ..., remove = NULL, clear = FALSE)  runs_mark(runs = NULL, ..., clear = FALSE)  runs_comment(runs = NULL, comment = NULL, ..., delete = NULL, clear = FALSE)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_label.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Annotate runs — runs_label","text":"runs runs selection label, comment string ... passed guild clear bool, whether clear existing tags/comments/label. add, remove character vector tags add remove delete integer vector, comment(s) delete, corresponding row number(s) dataframe found ls_runs()$comments.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_label.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Annotate runs — runs_label","text":"runs_comment() open editor comment supplied.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_label.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Annotate runs — runs_label","text":"","code":"if(FALSE) {  ls_runs(1) %>% runs_tag(clear = TRUE) ls_runs(1) %>% runs_tag(\"foo\") ls_runs(1)$tags ls_runs(1) %>% runs_tag(\"bar\") ls_runs(1)$tags ls_runs(1) %>% runs_tag(remove = \"foo\") ls_runs(1)$tags ls_runs(1) %>% runs_tag(\"baz\", clear = TRUE) ls_runs(1)$tags  ## pass through options to `guild tag` cli subcommand runs_tag(NULL, NULL, \"--help\") ls_runs(1) %>% runs_tag(\"--add\" = c(\"foo\", \"bar\")) ls_runs(1) %>% runs_tag(\"--add\" = \"baz\", \"--delete\" = \"bar\") ls_runs(1)$tags  }"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_scalars.html","id":null,"dir":"Reference","previous_headings":"","what":"Get full set of runs scalars — ls_scalars","title":"Get full set of runs scalars — ls_scalars","text":"Get full set runs scalars","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_scalars.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get full set of runs scalars — ls_scalars","text":"","code":"ls_scalars(runs = NULL, ...)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_scalars.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get full set of runs scalars — ls_scalars","text":"runs runs selection ... passed go `guild()`","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_scalars.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get full set of runs scalars — ls_scalars","text":"tibble runs scalars","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/runs_scalars.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get full set of runs scalars — ls_scalars","text":"","code":"if (FALSE) { ls_scalars(1) # scalars from most recent run ls_scalars(1:2) # scalars form two most recent runs  # pass in a dataframe of runs runs_info() %>%   filter(flags$epochs > 5) %>%   ls_scalars() }"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/view_run_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Render a Run Summary Report — view_run_report","title":"Render a Run Summary Report — view_run_report","text":"Render Run Summary Report","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/view_run_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render a Run Summary Report — view_run_report","text":"","code":"view_run_report(   run = \"1\",   output_dir = file.path(tempdir(), id),   template = system.file(\"templates/view-run.qmd\", package = \"guildai\"),   viewer = getOption(\"guildai.viewer\"),   ... )"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/view_run_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render a Run Summary Report — view_run_report","text":"output_dir directory place rendered document. template path parameterized quarto document. viewer Viewer display training run information within (default internal page viewer available, otherwise R session default web browser, utils::browseURL()). ... passed quarto::quarto_render() id run id. Defaults latest run.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/view_run_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render a Run Summary Report — view_run_report","text":"path generated html, invisibly","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/view_runs_diff.html","id":null,"dir":"Reference","previous_headings":"","what":"compare runs — view_runs_diff","title":"compare runs — view_runs_diff","text":"compare runs","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/view_runs_diff.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"compare runs — view_runs_diff","text":"","code":"view_runs_diff(   runs = \"1:2\",   output_dir = file.path(tempdir(), paste(ids, collapse = \"-\")),   template = system.file(\"templates/compare-runs.qmd\", package = \"guildai\"),   viewer = getOption(\"guildai.viewer\"),   ... )"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/view_runs_diff.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"compare runs — view_runs_diff","text":"output_dir place rendered html template report template viewer Viewer display training run information within (default internal page viewer available, otherwise R session default web browser, utils::browseURL()). ... passed quarto::quarto_render() ids, length 2 character vector run ids","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/view_runs_diff.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"compare runs — view_runs_diff","text":"path generated html, invisibly","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/write_run_attr.html","id":null,"dir":"Reference","previous_headings":"","what":"Write run attributes — write_run_attr","title":"Write run attributes — write_run_attr","text":"function nothing is_run_active() FALSE.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/write_run_attr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write run attributes — write_run_attr","text":"","code":"write_run_attr(name, data)"},{"path":"https://t-kalinowski.github.io/guildai-r/reference/write_run_attr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write run attributes — write_run_attr","text":"name string data data write. needs encodable yaml. Passing NULL delete existing attr.","code":""},{"path":"https://t-kalinowski.github.io/guildai-r/reference/write_run_attr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write run attributes — write_run_attr","text":"written yaml, invisibly.","code":""}]
